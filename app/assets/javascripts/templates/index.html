<!-- header -->

<div class='custom-header'>
  <div class="page-header">
    <h1>Stitch Fix Clearance Tool <small></small></h1>
  </div>
  <button type="button" class="btn btn-lg btn-primary" ng-click="createNewBatch()">New Batch</button>
  <div class="dropdown">
      <button type="button" class="btn btn-lg dropdown-toggle" data-toggle="dropdown"><span class="glyphicon glyphicon-cog" aria-hidden="true"></span></button>
      <ul class="dropdown-menu" role="menu">
          <li><a class="dropdown-item" data-toggle="modal" data-target=".min-prices">Update Minimum Prices</a></li>
          <li><a class="dropdown-item" data-toggle="modal" data-target=".upload-file">Upload CSV File</a></li>
      </ul>
  </div>
</div>

<!-- table -->

<input ng-model="searchText" type="text" class="form-control" placeholder="Search for items...">
<table class='table table-striped table-hover table-bordered'>
  <thead>
    <tr>
      <th ng-repeat = "(key,value) in items[0]" ng-click="sortGroup(key)" style="color:{{sortSelect == key ? 'red' : 'black'}}"> {{ key }}</th>
      <th>Batch</th>
      <th>Add To Batch</th>
    </tr>
  </thead>
  <tbody>
    <tr ng-repeat="item in items | orderBy: sortSelect | filter:{ 'id': searchText }">
        <td ng-repeat="value in item">
          {{ value }}
        </td>
        <td ng-click='changeView(item.clearance_batch_id)'> {{ item.clearance_batch_id }} </td>
        <td>
          <select ng-options="option for option in clearance_batches"
            ng-model="selectedItem"
            ng-change="clearanceItem(item.id , '1')">
          </select>
        </td>
    </tr>
  </tbody>
</table>


<!-- min price modal -->

<div class="modal fade min-prices" tabindex="-1" role="dialog" aria-labelledby="small-modal">
  <div class="modal-dialog modal-sm">
    <div class="modal-content">
      <table>
        <thead>
          <tr>
            <th>Type</th>
            <th>Min Price</th>
          </tr>
        </thead>
        <tbody>
          <tr ng-repeat="type in types">
              <td>
                {{ type.name }}
              </td>
              <td>
                <input ng-change="updateMinPrice(type.id,type.min_price)" ng-model='type.min_price'>
              </td>
            </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
